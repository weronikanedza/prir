#include <iostream>
#include <fstream>
#include <sstream>

#include "Row.hpp"

using namespace std;

#define NUM_OF_FEATURE 4

vector<Row> readFile();
Row loadRow(string line);

int main() {
	vector<Row> rows = readFile();
	return 0;
}

vector<Row> readFile() {

	ifstream file("iris.csv", ios::in);
	string line;
	vector<Row> rows;

	ofstream file2;
	file2.open("test.txt");
	 if(!file.is_open()){
	 cout << "\nERROR: could not open file\n";
	 exit(1);
	 }
	 else {
	 cout << "\nOpen call successful!\n";
	 file.close();

	 }

	while (getline(file, line)) {
		rows.push_back(loadRow(line));
	}

	cout<<rows.size();
	file.close();
	return rows;
}

Row loadRow(string line) {
	vector<double> features;
	string word;
	stringstream s(line);
	string::size_type sz;

	for (int i = 0; i < NUM_OF_FEATURE; i++) {
		getline(s, word, ',');
		features.push_back(stod(word, &sz));
	}
	getline(s, word, ',');

	return Row(features, word);
}
